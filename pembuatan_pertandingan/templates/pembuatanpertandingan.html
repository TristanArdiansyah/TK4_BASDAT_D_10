{% extends 'base.html' %}

{% block meta %}
<title>List Pertandingan</title>

{% endblock meta %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
      <div class="col-md-12">
        <div class="card mx-auto mt-4">
            <div class="card-body">
              <h5 class="card-title">LIST PERTANDINGAN</h5>
              <table class="table table-stripped">
                <thead>
                  <tr>
                    <th>Grup A</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                    {% for row in grup_a %}
                    <tr>
                    <td>{{row.0}}</td>
                    <td><button class="btn btn-sm btn-primary" style="margin-right: 2%;">Update</button> <a class="btn btn-sm btn-danger" href="/pembuatan_pertandingan/delete/{{row.1}}">Delete</a></td>
                    </tr>
                    {% endfor %}
                    {% if add_pointer == 'a' %}
                    <tr>
                        <td>? VS ?</td>
                        <td> <button type="button" class="btn btn-sm btn-success" data-toggle="modal" data-target="#pilihStadium"> Add </button></td>
                    </tr>
                    {% endif %}
                    <tr>
                    <th>Grup B</th>
                    <th>Action</th>
                    </tr>
                    {% for row in grup_b %}
                    <tr>
                    <td>{{row.0}}</td>
                    <td><button class="btn btn-sm btn-primary" style="margin-right: 2%;">Update</button> <a class="btn btn-sm btn-danger" href="/pembuatan_pertandingan/delete/{{row.1}}">Delete</a></td>
                    </tr>
                    {% endfor %}
                    {% if add_pointer == 'b' %}
                    <tr>
                        <td>? VS ?</td>
                        <td> <button type="button" class="btn btn-sm btn-success" data-toggle="modal" data-target="#myModal" > Add </button></td>
                    </tr>
                    {% endif %}
                    <tr>
                    <th>Grup C</th>
                    <th>Action</th>
                    </tr>
                    {% for row in grup_c %}
                    <tr>
                    <td>{{row.0}}</td>
                    <td><button class="btn btn-sm btn-primary" style="margin-right: 2%;">Update</button> <a class="btn btn-sm btn-danger" href="/pembuatan_pertandingan/delete/{{row.1}}">Delete</a></td>
                    </tr>
                    {% endfor %}
                    {% if add_pointer == 'c' %}
                    <tr>
                        <td>? VS ?</td>
                        <td> <button type="button" class="btn btn-sm btn-success" data-toggle="modal" data-target="#pilihStadium"> Add </button></td>
                    </tr>
                    {% endif %}
                    <tr>
                    <th>Grup D</th>
                    <th>Action</th>
                    </tr>
                    {% for row in grup_d %}
                    <tr>
                    <td>{{row.0}}</td>
                    <td><button class="btn btn-sm btn-primary" style="margin-right: 2%;">Update</button> <a class="btn btn-sm btn-danger" href="/pembuatan_pertandingan/delete/{{row.1}}">Delete</a></td>
                    </tr>
                    {% endfor %}
                    {% if add_pointer == 'd' %}
                    <tr>
                        <td>? VS ?</td>
                        <td> <button type="button" class="btn btn-sm btn-success" id="modalButton1" data-toggle="modal" data-target="#pilihStadium"> Add </button></td>
                    </tr>
                    {% endif %}
                  
                </tbody>
              </table>
              
            </div>
          </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
<form method="POST" action="">
{% csrf_token %}
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
      
      <div class="modal-content" >
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="myModalLabel" style="text-align: center;">PEMBUATAN PERTANDINGAN</h4>
        
        </div>
        
        <div class="modal-body">
        
          <div class="modal-split">
            <div class="form-group">
                <label for="stadium-select">Stadium:</label>
                <select class="form-control" name="stadium-select">
                  {% for row in list_stadium %}
                  <option value={{row.1}}>{{row.0}}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <label for="date-picker">Tanggal:</label>
                <input type="date" class="form-control" name="date-picker">
              </div>
            </div>
          </div>
          
          <div class="modal-split">
            <div class="form-group">
                <label for="wasit-utama">Pilih Wasit Utama:</label>
                <select class="form-control" name="wasit-utama">
                  {% for row in list_wasit %}
                  <option value={{row.0}}>{{row.1}}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <label for="wasit-pembantu1">Pilih Wasit Pembantu/Hakim Garis:</label>
                <select class="form-control" name="wasit-pembantu1">
                  {% for row in list_wasit %}
                  <option value={{row.0}}>{{row.1}}</option>
                  {% endfor %}
                  
                </select>
              </div>
              <div class="form-group">
                <label for="wasit-pembantu2">Pilih Wasit Pembantu/Hakim Garis:</label>
                <select class="form-control" name="wasit-pembantu2">
                    {% for row in list_wasit %}
                    <option value={{row.0}}>{{row.1}}</option>
                    {% endfor %}
                </select>
              </div>
              <div class="form-group">
                <label for="wasit-cadangan">Pilih Wasit Cadangan:</label>
                <select class="form-control" name="wasit-cadangan">
                  {% for row in list_wasit %}
                  <option value={{row.0}}>{{row.1}}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="form-group row">
                <div class="col">
                  <label for="tim1">Tim 1:</label>
                  <select class="form-control" name="tim1">
                    {% for row in list_tim %}
                    <option value={{row.0}}>{{row.0}}</option>
                    {% endfor %}
                  </select>
                </div>
                <div class="col">
                  <label for="tim2">Tim 2:</label>
                  <select class="form-control" name="tim2">
                    {% for row in list_tim %}
                    <option value={{row.0}}>{{row.0}}</option>
                    {% endfor %}
                  </select>
                </div>
          </div>	
  
        </div>
  
        <div class="modal-footer">
   <!--Nothing Goes Here but is needed! -->
        </div>
      </div>
    </div>
  </div>
</form>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"
integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1"
crossorigin="anonymous"></script>
<script>
$(document).ready(function() {
  prep_modal();
});

function prep_modal()
{
  $(".modal").each(function() {

  var element = this;
	var pages = $(this).find('.modal-split');

  if (pages.length != 0)
  {
    	pages.hide();
    	pages.eq(0).show();

    	var b_button = document.createElement("button");
                b_button.setAttribute("type","button");
          			b_button.setAttribute("class","btn btn-primary");
          			b_button.setAttribute("style","display: none;");
          			b_button.innerHTML = "Back";

    	var n_button = document.createElement("button");
                n_button.setAttribute("type","button");
          			n_button.setAttribute("class","btn btn-outline-primary");
          			n_button.innerHTML = "Next";
    	var submit_button = document.createElement("button");
                submit_button.setAttribute("type","submit");
          			submit_button.setAttribute("class","btn btn-outline-primary");
          			submit_button.innerHTML = "Submit";

    	$(this).find('.modal-footer').append(b_button).append(n_button).append(submit_button);
        $(submit_button).hide();

    	var page_track = 0;

    	$(n_button).click(function() {
        
        this.blur();

    		if(page_track == 0)
    		{
    			$(b_button).show();
    			$(submit_button).hide();
    		}

    		if(page_track == pages.length-2)
    		{
    			$(n_button).hide();
    			$(submit_button).show();
    		}

        if(page_track == pages.length-1)
        {
          $(element).find("form").submit();
          
        }

    		if(page_track < pages.length-1)
    		{
    			page_track++;

    			pages.hide();
    			pages.eq(page_track).show();
    		}


    	});

    	$(b_button).click(function() {

    		if(page_track == 1)
    		{
    			$(b_button).hide();
                $(submit_button).hide();
    		}

    		if(page_track == pages.length-1)
    		{
    			$(submit_button).hide();
    			$(n_button).show();
    		}

    		if(page_track > 0)
    		{
    			page_track--;

    			pages.hide();
    			pages.eq(page_track).show();
    		}


    	});

  }

  });
}
    </script>
 
{% endblock content %}